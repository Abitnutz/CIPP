"use strict";(self.webpackChunkcipp_docs=self.webpackChunkcipp_docs||[]).push([[7821],{3905:function(e,t,r){r.d(t,{Zo:function(){return u},kt:function(){return m}});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var c=n.createContext({}),l=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},u=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=l(r),m=a,f=d["".concat(c,".").concat(m)]||d[m]||p[m]||i;return r?n.createElement(f,o(o({ref:t},u),{},{components:r})):n.createElement(f,o({ref:t},u))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,o=new Array(i);o[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var l=2;l<i;l++)o[l]=r[l];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},1670:function(e,t,r){r.r(t),r.d(t,{assets:function(){return u},contentTitle:function(){return c},default:function(){return m},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return p}});var n=r(7462),a=r(3366),i=(r(7294),r(3905)),o=["components"],s={id:"samwizard",title:"SAM Wizard",description:"Setup access to my clients",slug:"/gettingstarted/postinstall/samwizard"},c=void 0,l={unversionedId:"gettingstarted/postinstall/samwizard",id:"gettingstarted/postinstall/samwizard",title:"SAM Wizard",description:"Setup access to my clients",source:"@site/docs/user/gettingstarted/postinstall/samwizard.md",sourceDirName:"gettingstarted/postinstall",slug:"/gettingstarted/postinstall/samwizard",permalink:"/docs/user/gettingstarted/postinstall/samwizard",editUrl:"https://github.com/KelvinTegelaar/CIPP/tree/website/docs/user/gettingstarted/postinstall/samwizard.md",tags:[],version:"current",lastUpdatedBy:"KelvinTegelaar",lastUpdatedAt:1679917534,formattedLastUpdatedAt:"27/03/2023",frontMatter:{id:"samwizard",title:"SAM Wizard",description:"Setup access to my clients",slug:"/gettingstarted/postinstall/samwizard"},sidebar:"userSidebar",previous:{title:"Run from Package mode",permalink:"/docs/user/gettingstarted/postinstall/runfrompackage"},next:{title:"Conditional Access Best Practices",permalink:"/docs/user/gettingstarted/postinstall/conditionalaccess"}},u={},p=[{value:"Authorization best practices for CIPP",id:"authorization-best-practices-for-cipp",level:2}],d={toc:p};function m(e){var t=e.components,r=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"setup"},"Setup"),(0,i.kt)("p",null,"This section describes the best practices and recommended setup for CIPP, including account usage, multi factor authentication, and DAP/GDAP groups. This section also describes the recommended setup for Conditional Access Policies. When this document has not been implemented you could encounter issues with the CSP, Graph, or Exchange sections of CIPP."),(0,i.kt)("h2",{id:"authorization-best-practices-for-cipp"},"Authorization best practices for CIPP"),(0,i.kt)("p",null,"to setup the Graph API, CSP, and Exchange integration CIPP requires a minimum level of permissions. We recommend to setup the account as follows"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},'Create a new account. Recommended to name this "CIPP Integration" and give it the username "',(0,i.kt)("a",{parentName:"li",href:"mailto:CIPP@domain.tld"},"CIPP@domain.tld"),'"\na. This account must be a Global Administrator while setting up the integration. These permissions may be removed after the integration has been setup.'),(0,i.kt)("li",{parentName:"ol"},"Add the account to the correct groups")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'If you are using DAP The CIPP user must be added to the "AdminAgents" group. '),(0,i.kt)("li",{parentName:"ul"},"If you are using GDAP, the CIPP user must be added to the groups you've assigned for GDAP has made. The minimum permissions CIPP needs to function are:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Application Administrator"),(0,i.kt)("li",{parentName:"ul"},"User Administrator"),(0,i.kt)("li",{parentName:"ul"},"Intune Administrator"),(0,i.kt)("li",{parentName:"ul"},"Exchange Administrator"),(0,i.kt)("li",{parentName:"ul"},"Security Administrator"),(0,i.kt)("li",{parentName:"ul"},"Cloud App Security Administrator"),(0,i.kt)("li",{parentName:"ul"},"Teams Administrator"),(0,i.kt)("li",{parentName:"ul"},"Sharepoint Administrator"),(0,i.kt)("li",{parentName:"ul"},"Privileged Authentication Administrator (Required to revoke sessions, reset admin passwords, and set up application policies)")))),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"This account must have ",(0,i.kt)("strong",{parentName:"li"},"Microsoft")," multi-factor authentication enforced for each logon, either via Conditional Access when available or via ",(0,i.kt)("a",{parentName:"li",href:"https://account.activedirectory.windowsazure.com/UserManagement/MultifactorVerification.aspx"},"Per User MFA")," when Conditional Access is not available. ")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"You may not use any other authentication provider than Microsoft for this account. Duo or other providers will not work. For more information on this see ",(0,i.kt)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/partner-center/partner-security-requirements-mandating-mfa#supported-mfa-options"},"this")),(0,i.kt)("li",{parentName:"ul"},"The CIPP service account requires MFA for each logon. That means no excluded locations may be applied nor authentication length policies. See the chapter about conditional access to make sure your policies are configured correctly.")))}m.isMDXComponent=!0}}]);